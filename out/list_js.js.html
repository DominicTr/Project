<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: list_js.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: list_js.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// function doBackgroundRequest(type, url, data, onloadCallback) {
// 	var xhr = new XMLHttpRequest();
// 	xhr.open(type, url);
// 	xhr.setRequestHeader("Content-Type", "application/json");
// 	xhr.onload = function() {
// 	    onloadCallback(xhr);
// 	  };

// 	  xhr.send(JSON.stringify(data));
// }

// var whatToDoWhenRequestIsDone = function(xhr) {
//   if (xhr.status === 200) {
//       console.log("added");
//       var newElem = document.createElement("LI");
//       var newId = document.createTextNode(itemName);

//       newElem.id = itemName;
//       document.getElementById(categoryName).appendChild(newElem);

//       var newElem2 = document.createElement("INPUT");
//       newElem2.type = "checkbox";
//       newElem.appendChild(newElem2);
//       newElem.appendChild(newId);
//     } else {
//       console.log("Error, not saved on the server");
//     }
// }
// doBackgroundRequest('POST', '/add-new-item', dataToSend, whatToDoWhenRequestIsDone);


/**
 * This function add a new Category to the current list
 */
function addCategory() {
	var categoryName = prompt('Enter a new category name:');
	var myElem = document.getElementById(categoryName);
	if (myElem === null) {
		var newElem = document.createElement('UL');
		var newElem2 = document.createElement('H3')
		var newId = document.createTextNode(categoryName);
		newElem.appendChild(newElem2);
		newElem2.appendChild(newId)
		newElem.id = categoryName;
		document.getElementById('categories').appendChild(newElem);
	}
}

/**
 * This function add a new Item in a specific Category
 */
function addItem() {
	var categoryName = document.getElementById('chooseCategory').value
	var itemName = document.getElementById('chooseItem').value
	var myCategory = document.getElementById(categoryName)
	var myName = document.getElementById(itemName)	
	if (myCategory === null) {
		alert('Category does not exist!')
	} else {
		// problem: can be number
		if (myName === null &amp;&amp; itemName.length > 0) {
			var xhr = new XMLHttpRequest();
			xhr.open('POST', '/add-new-item');
			xhr.setRequestHeader('Content-Type', 'application/json');
			xhr.onload = function() {
		    if (xhr.status === 200) {
		        console.log('added');
			    var newElem = document.createElement('LI');
				var newId = document.createTextNode(itemName)

				newElem.id = itemName
				document.getElementById(categoryName).appendChild(newElem)

				newElem.appendChild(newId)

		    }
		    else {
		        console.log('Error, not saved on the server');
		    }
		};

	    	xhr.send(JSON.stringify({
			    itemName: itemName,
			    category: categoryName
			}));

		} else {
			alert('Cant add item!')
		}
	}
}
 
/**
 * This function delete a specific Category
 */
function delCategory() {
	var categoryName = document.getElementById('chooseCategory').value
	var myCategory = document.getElementById(categoryName)
	if (myCategory === null) {
		alert('Category does not exist!')
	} else { 
		myCategory.parentNode.removeChild(myCategory);
	}
}

/**
 * This function delete a specific Category
 */
function delItem() {
	var itemName = document.getElementById('chooseItem').value
	var myItem = document.getElementById(itemName)
	if (myItem === null) {
		alert('Item does not exist!')
	} else { 
		myItem.parentNode.removeChild(myItem);
	}
}

document.getElementById('newCategory').addEventListener('click', function() {
	addCategory();
});

document.getElementById('newItem').addEventListener('click', function() {
	addItem();
});

document.getElementById('delCategory').addEventListener('click', function() {
	delCategory();
});

document.getElementById('delItem').addEventListener('click', function() {
	delItem();
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#addCategory">addCategory</a></li><li><a href="global.html#addItem">addItem</a></li><li><a href="global.html#delCategory">delCategory</a></li><li><a href="global.html#delItem">delItem</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu Apr 26 2018 15:46:14 GMT-0700 (Pacific Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
